<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar do Cear√° - Sistema de Caixa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="caixa.css">
    
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="h3 mb-0">BAR DO CEAR√Å</h1>
                    <p class="mb-0">Sistema de Caixa (Lan√ßamento de Sa√≠das)</p>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-light me-2" onclick="verificarSenhaFechamento()">
                         üìä Fechar Caixa
                    </button>
                    <button class="btn btn-warning" id="abrir-caixa">
                        üí∞ Venda R√°pida
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="alert-container" class="alert-container"></div>

        <h2 class="h4 mb-3">SELECIONAR CLIENTE</h2>
        <div class="clientes-container" id="clientes-container">
            <button class="cliente" data-cliente-id="1">Cliente 1</button>
            <button class="cliente" data-cliente-id="2">Cliente 2</button>
            <button class="cliente" data-cliente-id="3">Cliente 3</button>
            <button class="cliente" data-cliente-id="4">Cliente 4</button>
            <button class="cliente" data-cliente-id="5">Cliente 5</button>
            <button class="cliente" data-cliente-id="6">Cliente 6</button>
            <button class="cliente" data-cliente-id="7">Cliente 7</button>
            <button class="cliente" data-cliente-id="8">Cliente 8</button>
            <button class="cliente" data-cliente-id="9">Cliente 9</button>
            <button class="cliente" data-cliente-id="10">Cliente 10</button>
            <button class="cliente" data-cliente-id="11">Cliente 11</button>
            <button class="cliente" data-cliente-id="12">Cliente 12</button>
            <button class="cliente" data-cliente-id="13">Cliente 13</button>
            <button class="cliente" data-cliente-id="14">Cliente 14</button>
            <button class="cliente" data-cliente-id="15">Cliente 15</button>
            <button class="cliente" data-cliente-id="16">Cliente 16</button>
            <button class="cliente" data-cliente-id="17">Cliente 17</button>
            <button class="cliente" data-cliente-id="18">Cliente 18</button>
            <button class="cliente" data-cliente-id="19">Cliente 19</button>
            <button class="cliente" data-cliente-id="20">Cliente 20</button>

            <button class="cliente cliente-aberto" data-cliente-id="rapida" id="cliente-rapida">Venda R√°pida</button>
        </div>

        <h2 class="h4 mt-4 mb-3">CATEGORIAS DE PRODUTOS</h2>
           <div class="nav-bar">
        <div class="nav-item" data-target="cervejas">üç∫ Cervejas ü•É Bebidas Quentes</div>
       
        <div class="nav-item" data-target="quentes">ü•É Whisky üç∏ Gin üçπ Askov üß™ Corotes ü•Ç Gelos</div>
        <div class="nav-item" data-target="quentes">üç¨ Balas / Salgadinhos üçñ Por√ß√µes ü•ê Salgados</div>

        <div class="nav-item" data-target="refrigerantes">üßÉ Refrigerantes ‚ö° Energ√©ticos</div>

 
        <div class="nav-item" data-target="outros">üö¨ Cigarro / fichasüé±</div>

  <h2 class="h4 mt-4 mb-3">REGISTRO DE ATIVIDADES</h2>
<div id="log-container" class="log-container"></div>



    </div>
    
        <div class="mb-3">
            <div id="category-buttons-container" class="d-flex flex-wrap gap-2">
                <!-- Os bot√µes de categoria ser√£o carregados via JavaScript -->
            </div>
        </div>
        
        <div class="produtos-container" id="produtos-container">
            <!-- Os produtos ser√£o carregados via JavaScript -->
        </div>
    </div>
    
    <!-- Modal do Caixa -->
    <div class="modal fade" id="caixaModal" tabindex="-1" aria-labelledby="caixaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="caixaModalLabel">Caixa - Pedido</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body modal-fixed-body">
                    <div class="row h-100">
                        <!-- Coluna Esquerda: Itens do Pedido e Produtos -->
                        <div class="col-md-8 border-end">

                            
                            <!-- Se√ß√£o: Itens do Pedido 
                            <div class="mb-4">
                                <h6 class="mb-3">
                                    <span class="badge bg-primary" id="caixa-item-count">0 itens</span>
                                    - Itens do Pedido
                                </h6>
                                <div class="caixa-produtos-scroll-container" style="max-height: 200px; overflow-y: auto;">
                                    <ul id="caixa-list" class="list-group">
                                        <li class="list-group-item text-muted">Nenhum item adicionado ao pedido.</li>
                                    </ul>
                                </div>
                            </div> -->
                            
                            <!-- Se√ß√£o: Adicionar Produtos -->
                            <div>
                                <h6 class="mb-3">Adicionar Produtos</h6>
                                <div class="caixa-produtos-container">
                                    <!-- Categorias e produtos ser√£o carregados via JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Coluna Direita: Resumo e A√ß√µes -->
                        <div class="col-md-4">

                                                        <div class="mb-4">
                                <h6 class="mb-3">
                                    <span class="badge bg-primary" id="caixa-item-count">0 itens</span>
                                    - Itens do Pedido
                                </h6>
                                <div class="caixa-produtos-scroll-container" style="max-height: 200px; overflow-y: auto;">
                                    <ul id="caixa-list" class="list-group">
                                        <li class="list-group-item text-muted">Nenhum item adicionado ao pedido.</li>
                                    </ul>
                                </div>
                            </div>


                            <h6 class="mb-3 text-center">Resumo do Pedido</h6>




                            
                            <div class="card mb-3">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="fw-bold">Subtotal:</span>
                                        <span id="caixa-subtotal" class="fw-bold">R$ 0,00</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Desconto:</span>
                                        <span id="caixa-desconto">R$ 0,00</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between fw-bold fs-5 text-success">
                                        <span>TOTAL:</span>
                                        <span id="caixa-total">R$ 0,00</span>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="forma-pagamento" class="form-label fw-bold">Forma de Pagamento</label>
                                <select id="forma-pagamento" class="form-select">
                                    <option value="Selecione">Selecione</option>
                                    <option value="Dinheiro">üíµ Dinheiro</option>
                                    <option value="Cartao_Debito">üí≥ Cart√£o D√©bito</option>
                                    <option value="Cartao_Credito">üí≥ Cart√£o Cr√©dito</option>
                                    <option value="Pix">üì± PIX</option>
                                    <option value="Fiado">üìí Fiado</option>
                                    
                                </select>
                            </div>
                            
                             <!-- ocultando bot√£o de cancelamento de pedidoe impress√£o! --> 

                            <div class="d-grid gap-2">
                            <!-- <button type="button" class="btn btn-info" id="imprimir-pedido">
                                    üñ®Ô∏è Imprimir Pedido
                                </button>

                               
                                <button type="button" class="btn btn-warning" onclick="cancelarPedido()">
                                    ‚ùå Cancelar Pedido
                                </button> -->
                                     
                                <br><button type="button" class="btn btn-success" id="finalizar-venda">
                                    ‚úÖ Finalizar Venda
                                </button>
                            </div> 
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Senha para Fechamento -->
    <div class="modal fade" id="senhaModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title">üîí Fechamento de Caixa</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Para gerar o relat√≥rio e fechar o caixa, insira a senha de administrador:</p>
                    <input type="password" id="senha-fechamento" class="form-control mb-3" placeholder="Digite a senha">
                    <p id="senha-message" class="text-danger mb-0"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" id="btn-fechar-caixa">Gerar Relat√≥rio & Fechar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Relat√≥rio -->
    <div class="modal fade" id="relatorioModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title">üìä Relat√≥rio de Vendas do Dia</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="relatorioModalBody">
                    <div class="text-center">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Carregando...</span>
                        </div>
                        <p class="mt-2">Gerando relat√≥rio...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="imprimirRelatorio()">
                        üñ®Ô∏è Imprimir Relat√≥rio
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="caixa_firebase.js" defer></script>
    <script src="caixa_impressao.js"></script>
    <script src="caixa_log.js" defer></script>
    <script src="caixa.js" defer></script>
    <script src="produtos.js" defer></script>

</body>
</html>